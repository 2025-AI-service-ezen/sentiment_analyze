## 프로젝트 1: 감성 분석 모델 구현 및 학습 - 제품 요구사항 정의서 (PRD)

**문서 버전:** 1.0
**작성일:** 2025년 7월 18일
**작성자:** Gemini

### 1. 서론

본 문서는 감성 분석 앙상블 모델 프로젝트의 첫 번째 하위 프로젝트인 "감성 분석 모델 구현 및 학습"에 대한 제품 요구사항을 정의합니다. 이 문서는 [`PROJECT_OVERVIEW.md`](PROJECT_OVERVIEW.md)에 명시된 프로젝트의 목표와 범위를 기반으로 합니다. 이 프로젝트는 불안정한 초기 데이터 소스를 정제하고, 이를 기반으로 4가지 감성 분석 모델의 베이스라인을 구축하며, 모든 실험 과정을 체계적으로 관리하는 것을 목표로 합니다.

### 2. 프로젝트 목표

*   **데이터 문제 해결 및 정제된 데이터셋 확보:** 편향되고 문장 길이 편차가 심한 원본 리뷰 데이터를 통합하고, 문장 단위로 분리하며, 임시 라벨링을 수행하여 SQLite 데이터베이스에 체계적으로 저장합니다. 초기 모델 학습을 위해 평점 1과 5의 데이터만 사용하여 최대 2만개(각 라벨당 최대 1만개)의 균형 잡힌 데이터셋을 생성합니다.
*   **4개 감성 분석 모델의 베이스라인 구축:** Word Sentiment, LSTM, BiLSTM, BERT 모델을 각각 독립적으로 구현하고, 초기 데이터셋으로 학습을 완료하여 각 모델의 베이스라인 성능을 확보합니다.
*   **실험 재현성 및 관리 체계 구축:** 데이터셋 버전 관리(DVC) 및 MLflow를 통한 실험 추적을 통해 모든 학습 과정과 산출물(데이터셋, 모델, 성능 지표)의 재현성을 보장하고 체계적으로 관리합니다.

### 3. 사용자 스토리 및 사용 사례

*   **데이터 과학자/ML 엔지니어:**
    *   "나는 다양한 원본 리뷰 데이터를 통합하고 정제하여 모델 학습에 적합한 형태로 준비하고 싶다."
    *   "나는 초기 데이터셋의 라벨 편향 및 문장 길이 편차 문제를 해결하고, 균형 잡힌 데이터셋을 생성하고 싶다."
    *   "나는 Word Sentiment, LSTM, BiLSTM, BERT 모델을 각각 학습시키고, 그 성능을 평가하고 싶다."
    *   "나는 모델 학습 과정의 모든 하이퍼파라미터, 메트릭, 아티팩트를 체계적으로 기록하고 관리하여 실험 결과를 쉽게 비교하고 재현하고 싶다."
    *   "나는 학습된 모델과 데이터셋의 버전을 관리하여, 향후 모델 개선 및 재훈련에 활용하고 싶다."

### 4. 기능 요구사항 (Functional Requirements)

*   **데이터 처리 및 관리:**
    *   `y_reviews.csv` 및 `naver_shopping.txt`와 같은 숙박업소 리뷰 원본 데이터를 통합하여 SQLite 데이터베이스(`raw_reviews` 테이블)에 저장해야 합니다.
    *   KSS 라이브러리를 사용하여 `raw_reviews` 테이블의 리뷰 문단을 문장 단위로 분리하고, 원본 라벨을 임시 라벨(`is_temporary_label=True`)로 `sentences` 테이블에 저장해야 합니다.
    *   평점 0인 데이터는 임시로 3(중립)으로 처리하고, `is_temporary_label` 플래그를 설정해야 합니다.
    *   `sentences` 테이블에서 평점 1과 5의 데이터만 사용하여 최대 2만개(각 라벨당 최대 1만개)의 균형 잡힌 데이터셋(`v1.0-initial-20k.csv`)을 생성해야 합니다.
    *   생성된 데이터셋은 DVC를 통해 버전을 관리해야 합니다.
*   **모델 학습 및 평가:**
    *   Word Sentiment, LSTM, BiLSTM, BERT 모델을 각각 독립적으로 학습시킬 수 있어야 합니다.
    *   각 모델은 `v1.0-initial-20k.csv` 데이터셋을 기반으로 학습 및 평가되어야 합니다.
    *   각 모델의 학습 과정에서 손실(loss), 정확도(accuracy) 등 주요 메트릭을 실시간으로 추적해야 합니다.
    *   학습 완료 후, 각 모델의 테스트셋 성능(정확도, 정밀도, 재현율, F1-점수)을 평가하고 보고서를 생성해야 합니다.
*   **실험 관리:**
    *   MLflow를 사용하여 모든 모델 학습 실험의 하이퍼파라미터, 메트릭, 아티팩트(모델 파일, 토크나이저, 감성 사전, 평가 결과)를 기록하고 관리해야 합니다.
    *   각 모델에 특화된 토크나이저(예: Word Sentiment/LSTM/BiLSTM용 `word_level_tokenizer.pickle`, BERT용 `BertTokenizer` 파일들)를 명확히 구분하여 저장하고 MLflow에 로깅해야 합니다.

### 5. 비기능 요구사항 (Non-Functional Requirements)

*   **성능:**
    *   데이터 통합 및 문장 분리 과정은 대용량 데이터(수십만 건 이상)를 효율적으로 처리할 수 있어야 합니다 (Pandas 벡터화, SQLite 벌크 삽입 최적화).
    *   각 모델의 학습은 주어진 하드웨어 환경(GTX 960, 1070, 1080Ti 등 GPU)에서 합리적인 시간 내에 완료되어야 합니다.
*   **재현성:**
    *   모든 모델 학습 실험은 동일한 데이터셋 버전과 코드를 사용하여 재현 가능해야 합니다.
*   **신뢰성:**
    *   데이터 파이프라인 및 모델 학습 과정에서 발생할 수 있는 오류를 적절히 처리하고, 견고하게 작동해야 합니다.
*   **유지보수성:**
    *   코드의 가독성이 높고, 모듈화되어 있어 향후 기능 확장 및 유지보수가 용이해야 합니다.
    *   충분한 주석과 문서화를 통해 코드 이해도를 높여야 합니다.
*   **보안:**
    *   (해당 없음 - 초기 학습 단계)

### 6. 범위 (Scope)

*   **포함 범위:**
    *   원본 데이터 통합 및 SQLite DB 저장
    *   문장 분리 및 임시 라벨링
    *   2만개 균형 데이터셋 생성 및 DVC 버전 관리
    *   Word Sentiment, LSTM, BiLSTM, BERT 모델의 개별 학습 및 평가
    *   MLflow를 통한 실험 추적 및 아티팩트 관리
*   **제외 범위:**
    *   학습된 모델을 활용한 API 서비스 구축 (프로젝트 3)
    *   데이터셋 정제 및 모델 재훈련 루프 (프로젝트 2)
    *   실시간 모니터링 및 배포 자동화 (프로젝트 3)

### 7. 향후 고려사항

*   프로젝트 2에서 진행될 데이터셋 정제 및 모델 재훈련을 위한 기반을 마련합니다.
*   프로젝트 3에서 진행될 API 서비스 구축을 위한 학습된 모델을 제공합니다.
